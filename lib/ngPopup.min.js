/**
 * ng-popup - Angular modeless dialog without jQuery dependency
 * @author Marko Cen
 * @version v0.5.0
 * @link http://markocen.github.io/ngPopup/ngPopupDemo.html
 * @license MIT
 */
!function(){angular.module("ngPopup",[])}(),function(){function e(e,t,o){function n(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}function i(e,t,o){var i=o.scope,s=o.element,l=(o.attrs,s[0]);e.pinned?(l.style.position="fixed",m=n()):(l.style.position="absolute",l.style.top=e.position.top+n()-m+"px"),i.option.isMinimized||g.updateElementSize(s,e.width,e.height),e.position.top==t.position.top&&e.position.left==e.position.left||(l.style.top=e.position.top+"px",l.style.left=e.position.left+"px"),e.isShow==t.isShow||u||(e.isShow?e.onOpen&&e.onOpen():e.onClose&&e.onClose()),e.width==t.width&&e.height==t.height||e.onResize&&e.onResize(),e.hasTitleBar!=t.hasTitleBar&&(i.option.hasTitleBar=e.hasTitleBar),u=!1}function s(e,t){var o=e[0];"string"==typeof t.top&&(o.style.top=t.top),"number"==typeof t.top&&(o.style.top=t.top+"px"),"string"==typeof t.left&&(o.style.left=t.left),"number"==typeof t.left&&(o.style.left=t.left+"px")}function l(e,t,o){var n=e[0];"string"==typeof t&&("%"==t.slice(-1)?n.style.width=t:n.style.width=parseInt(t,10)+"px"),"number"==typeof t&&(n.style.width=t+"px"),"string"==typeof o&&("%"==o.slice(-1)?n.style.height=o:n.style.height=parseInt(o,10)+"px"),"number"==typeof o&&(n.style.height=o+"px")}function a(e,t){var o=t[0];e.position.top=o.offsetTop,e.position.left=o.offsetLeft,"none"!=o.getElementsByClassName("content")[0].style.display&&(e.width=o.offsetWidth,e.height=o.offsetHeight)}function p(e){return e?(e.modelName=e.modelName||"ngPopup",e.width=e.width||100,e.height=e.height||100,e.template=e.template||"",e.templateUrl=e.templateUrl||null,e.resizable=null==e.resizable?!0:e.resizable,e.draggable=null==e.draggable?!0:e.draggable,e.position=e.position||{top:0,left:0},e.title=e.title||"Welcome to ngPopup!",e.hasTitleBar=null==e.hasTitleBar?!0:e.hasTitleBar,e.pinned=null==e.pinned?!1:e.pinned,e.isShow=null==e.isShow?!0:e.isShow,e.isMinimized=null==e.isMinimized?!1:e.isMinimized,e.isMaximized=null==e.isMaximized?!1:e.isMaximized,e.onOpen=e.onOpen||function(){},e.onClose=e.onClose||function(){},e.onDragStart=e.onDragStart||function(){},e.onDragEnd=e.onDragEnd||function(){},e.onResize=e.onResize||function(){},e):{modelName:"myDialog",width:100,height:100,template:"",templateUrl:null,resizable:!0,draggable:!0,position:{top:-1,left:-1},title:"Welcome to ngPopup!",hasTitleBar:!0,pinned:!1,isShow:!0,onOpen:function(){},onClose:function(){},onDragStart:function(){},onDragEnd:function(){},onResize:function(){}}}function r(e,t){var o=t[0];return{open:function(t){null!=t&&(o.style.top=t.top+"px",o.style.left=t.left+"px",e.position.top=t.top,e.position.left=t.left),e.onOpen&&e.onOpen(),e.isShow=!0},close:function(t){e.onClose&&e.onClose(),e.isShow=!1,u=!0},maximize:function(t){t?(o.style.height=f+"px",o.style.width=c+"px",e.width=o.offsetWidth,e.height=o.offsetHeight,angular.element(document.querySelector("#maxBtn")).removeClass("fa-compress").addClass("fa-expand")):(f=o.offsetHeight,c=o.offsetWidth,o.getElementsByClassName("content")[0].style.display="block",o.style.top="5px",o.style.left="5px",o.style.width="calc( 100vw - 10px )",o.style.height="calc( 100vh - 10px )",e.position.top=o.offsetTop,e.position.left=o.offsetLeft,e.width=o.offsetWidth,e.height=o.offsetHeight,angular.element(document.querySelector("#maxBtn")).removeClass("fa-expand").addClass("fa-compress")),e.isMaximized=!e.isMaximized,u=!0},minimize:function(t){t?(o.style.height=e.height+"px",o.style.width=e.width+"px",o.style.top=e.position.top+"px",o.style.left=e.position.left+"px",o.getElementsByClassName("content")[0].style.display="block",angular.element(document.querySelector("#minBtn")).removeClass("fa-plus").addClass("fa-minus"),e.position.top=o.offsetTop,e.position.left=o.offsetLeft):(o.getElementsByClassName("content")[0].style.display="none",o.style.height=o.getElementsByClassName("titleBar")[0].style.height,o.style.width="200px",angular.element(document.querySelector("#minBtn")).removeClass("fa-minus").addClass("fa-plus")),e.isMinimized=!e.isMinimized,u=!0},togglePin:function(){1!=e.pinned?(document.querySelector("#pinBtn").style.color="#EB5342",e.pinned=!0):(document.querySelector("#pinBtn").style.color="",e.pinned=!1),u=!0},isMaximized:function(){return e.isMaximized},isMinimized:function(){return e.isMinimized}}}function d(n){var i=n.template?n.template:"",s=e.defer(),l='<div class="container"><div class="resizeCorner"><div class="left-top-corner"></div><div class="left-bottom-corner"></div><div class="right-top-corner"></div><div class="right-bottom-corner"></div></div><div class="resizeBar"><div class="top-bar"></div><div class="right-bar"></div><div class="bottom-bar"></div><div class="left-bar"></div></div><div class="titleBar" ng-show="option.hasTitleBar"><span class="title">{{option.title}}</span><div class="iconGroup"><i class="fa fa-minus" ng-click="action.minimize(option.isMinimized)" id="minBtn"></i><i class="fa fa-expand" ng-click="action.maximize(option.isMaximized)" id="maxBtn"></i><i class="fa fa-map-pin" ng-click="action.togglePin($event)" id="pinBtn"></i><i class="fa fa-close" ng-click="action.close($event)" id="closeBtn"></i></div></div><div class="content" ng-class="{contentNoBar:!option.hasTitleBar}">';return n.templateUrl?(t.get(n.templateUrl).then(function(e){l+=i+e.data+"</div></div>",s.resolve(l)},function(e){o.error(e),s.reject(e)}),s.promise):l+=i+"</div></div>"}var u=!1,f=0,c=0,m=0,g={layoutInitAsync:d,getDefaultMethods:r,getDefaultOptions:p,updateParentScopeOptions:a,updateElementSize:l,updateElementPosition:s,updateBindingValue:i};return g}angular.module("ngPopup").factory("ngPopupBuilder",e),e.$inject=["$q","$http","$log"]}(),function(){function e(e,t,o,n,i){return{restrict:"EA",scope:{option:"=?"},replace:!0,template:'<div class="ngPopup" ng-show="option.isShow"></div>',link:function(s,l,a){var p=s,r=l[0],d=i.getDefaultOptions(p.option),u=!1,f=!1,c=!1,m={scope:p,element:l,attrs:a};o.when(i.layoutInitAsync(d)).then(function(e){var t=n(e)(p);l.append(t),i.updateBindingValue(d,i.getDefaultOptions(),m),c=!0}),p.$watch("option",function(e,t){c&&i.updateBindingValue(e,t,m)},!0),p.action=i.getDefaultMethods(d,l),p.mouseMoveHandler=angular.noop,p.mouseUpHandler=function(){t(function(){d.onDragEnd&&u&&(d.onDragEnd(),u=!1,f=!1),e.find("body").removeClass("unselectable"),e.off("mousemove",p.mouseMoveHandler)})},p.mouseDownHandler=function(o){t(function(){var n=angular.element(o.target),s=parseFloat(window.getComputedStyle(r,null).top),a=parseFloat(window.getComputedStyle(r,null).left),c=parseFloat(window.getComputedStyle(r,null).height),m=parseFloat(window.getComputedStyle(r,null).width),g=o.pageY,h=o.pageX;if(n.hasClass("titleBar")||n.hasClass("title")||n.parent().hasClass("contentNoBar")||n.hasClass("contentNoBar")){if(0==d.draggable)return;d.onDragStart&&(d.onDragStart(),u=!0),p.mouseMoveHandler=function(e){t(function(){r.style.top=e.pageY-g+s+"px",r.style.left=e.pageX-h+a+"px",i.updateParentScopeOptions(p.option,l)})},e.find("body").addClass("unselectable"),e.on("mousemove",p.mouseMoveHandler)}if(n.parent().hasClass("resizeCorner")){if(0==d.resizable)return void e.find("body").removeClass("unselectable");d.onResize&&(d.onResize(),f=!0),e.find("body").addClass("unselectable"),n.hasClass("right-bottom-corner")?p.mouseMoveHandler=function(e){t(function(){r.style.height=c+e.pageY-g+"px",r.style.width=m+e.pageX-h+"px",i.updateParentScopeOptions(p.option,l)})}:n.hasClass("right-top-corner")?p.mouseMoveHandler=function(e){t(function(){r.style.top=e.pageY+"px",r.style.width=m+e.pageX-h+"px",r.style.height=c-e.pageY+g+"px",i.updateParentScopeOptions(p.option,l)})}:n.hasClass("left-top-corner")?p.mouseMoveHandler=function(e){t(function(){r.style.left=a+e.pageX-h+"px",r.style.top=e.pageY+"px",r.style.width=m-e.pageX+h+"px",r.style.height=c-e.pageY+g+"px",i.updateParentScopeOptions(p.option,l)})}:n.hasClass("left-bottom-corner")&&(p.mouseMoveHandler=function(e){t(function(){r.style.left=e.pageX+"px",r.style.width=m-e.pageX+h+"px",r.style.height=c+e.pageY-g+"px",i.updateParentScopeOptions(p.option,l)})}),e.on("mousemove",p.mouseMoveHandler)}if(n.parent().hasClass("resizeBar")){if(0==d.resizable)return void e.find("body").removeClass("unselectable");d.onResize&&(d.onResize(),f=!0),e.find("body").addClass("unselectable"),n.hasClass("left-bar")?p.mouseMoveHandler=function(e){t(function(){r.style.left=a+e.pageX-h+"px",r.style.width=m-e.pageX+h+"px",i.updateParentScopeOptions(p.option,l)})}:n.hasClass("right-bar")?p.mouseMoveHandler=function(e){t(function(){r.style.width=m+e.pageX-h+"px",i.updateParentScopeOptions(p.option,l)})}:n.hasClass("top-bar")?p.mouseMoveHandler=function(e){t(function(){r.style.top=e.pageY+"px",r.style.height=c-e.pageY+g+"px",i.updateParentScopeOptions(p.option,l)})}:n.hasClass("bottom-bar")&&(p.mouseMoveHandler=function(e){t(function(){r.style.height=c+e.pageY-g+"px",i.updateParentScopeOptions(p.option,l)})}),e.on("mousemove",p.mouseMoveHandler)}})},l.on("mousedown",p.mouseDownHandler),l.on("mouseup",p.mouseUpHandler),p.$on("$destroy",function(){l.off("mousedown",p.mouseDownHandler),l.off("mouseup",p.mouseUpHandler),e.off("mousemove",p.mouseMoveHandler)})}}}angular.module("ngPopup").directive("ngPopUp",e),e.$inject=["$document","$timeout","$q","$compile","ngPopupBuilder"]}();